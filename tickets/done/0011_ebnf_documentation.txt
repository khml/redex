チケット番号: 0011
タイトル: トークン／構文の EBNF 仕様書作成

概要:
  - 本プロジェクトで使用する言語の構文を EBNF（拡張バッカス・ナウア記法）で明確に定義する。
  - トークナイザ（`lib/redex/tokenizer.rb`）の出力とパーサ（`lib/redex/parser.rb`）の入力が整合するよう、トークン種別と構文ルールを結び付ける。

目的:
  - ドキュメントで言語仕様を明文化し、実装／テスト／ドキュメント間の齟齬を防ぐ。
  - 将来の拡張（浮動小数点、文字列、複合演算子、Unicode 識別子等）に対する設計の基準を提供する。

受け入れ基準:
  - EBNF で主要な文法（式、項、因子、代入/宣言、識別子、リテラル、式の優先順位）を記述していること。
  - トークン種別（`:number`, `:ident`, `:keyword`, `:op`, `:lparen`, `:rparen`, `:unknown` 等）と EBNF のタームを対応づけた節があること。
  - 最低1つの具体例（入力ソース → トークン列 → 抽象構文木（簡易））が含まれていること。
  - `docs/ebnf.md` として `docs/` 配下に配置され、`README.md` から参照可能（または参照方法を指示）であること。

実施ステップ:
 1. 現行の `lib/redex/tokenizer.rb` と `lib/redex/parser.rb` の実装を参照して、現状の言語断片（キーワード、演算子、リテラル等）を列挙する。
 2. トークン名と字句（レキシカル）ルールを簡潔にまとめる（ASCII 識別子制約、整数のみ等）。
 3. EBNF で構文ルールを記述する（例: Expression → Term (('+' | '-') Term)*) 。
 4. 例を一つ用意し、入力文字列→トークン→（簡易）AST の流れを示す。
 5. `docs/ebnf.md` を作成し、`README.md` もしくは `docs/` の目次に参照を追加する案を記載する。
 6. 必要に応じてテスト（パーサ／トークナイザ）に対応する変更を提案する。

成果物:
  - `tickets/0011_ebnf_documentation.txt`（このファイル）
  - `docs/ebnf.md`（EBNF 仕様書）
  - （任意）`README.md` への参照追加パッチ案

注意点／議論事項:
  - 現在トークナイザは `:unknown` を返す方針だが、EBNF 仕様では許容しないシンボルについてはエラー扱いにするか、上位で処理するかを明示する必要がある。
  - 将来の拡張（複合演算子、文字列リテラル、Unicode 識別子）についてはオプション節を設ける。

推定工数: 1〜2 日（文書作成 + レビュー）

担当者: 未割当

作成日: 2025-12-26
