チケット番号: 0001_1
タイトル: 実装計画作成（シンプル言語処理系）

---

概要:
  `docs/requirements/requirements_specification.md` に基づき、実装フェーズの詳細計画（工程・タスク分解・見積り・成果物）を作成する。

目的:
  - 実装で必要な作業を明確化して順序立てる
  - 子チケット（実装単位）に切り分けて担当・見積りを割り当てられる状態にする

スコープ:
  - 含む: パーサ/評価器の実装、外部フックの実装、例外クラス、単体テスト、簡易README
  - 含まない: 将来的な拡張（括弧・関数・サンドボックス化等）は別チケット

成果物:
  1. 実装タスク一覧（子チケット）: `tickets/0001_<連番>_<名前>.txt`
  2. プロジェクト構成（推奨ディレクトリ）: `lib/redex/`, `spec/`（または `test/`）、`README.md`
  3. 最低限動作するプロトタイプ実装
  4. 単体テスト一式（構文・演算・resolver・エラーパス）

前提条件:
  - 要件定義書が確定していること
  - Ruby 3.x をターゲットにすること

推奨実装フェーズ（段階）:
  A. 準備
    - リポジトリ内に `lib/redex` と `spec` を作成
    - 開発用ルール（Rubocop等）は必要に応じて別チケット
  B. コア実装（最小実装）
    1. トークナイザ（空白区切り）と簡易パーサ
    2. AST ノード（Literal, Identifier, BinaryOp, Let/ConstStatement）
    3. 評価器（`eval(context, resolver)`）とグローバル環境ハッシュ
    4. 例外クラス定義 (`Redex::SyntaxError`, `Redex::NameError`, `Redex::EvaluationError`)
    5. `ruby_resolver` と `context` の統合ロジック（解決順の実装）
  C. テストとドキュメント
    - 単体テスト: 演算優先度、定数/変数、resolver、エラーパス
    - README に最小使用例を記載
  D. リファクタとバルク評価/パフォーマンス対応

タスク分解（初期案、各タスクは通常チケットとして作成）:
  - 本プロジェクトでは「子チケット」ではなく、リポジトリ上の通常チケット（4桁のチケット番号）として個別チケットを作成します。
  - 例（チケット命名例）:
    - 0002_setup_structure.txt — プロジェクト構成と雛形作成（`lib/`, `spec/`, README）
    - 0003_token_parser.txt — トークナイザとパーサ実装（文法に基づく）
    - 0004_ast_eval.txt — ASTノードと評価器の実装
    - 0005_resolver_and_context.txt — `context`・`ruby_resolver` 統合と `provenance` ロジック
    - 0006_errors_tests.txt — 例外クラスとエラーパスのテスト実装
    - 0007_docs_and_readme.txt — README と使用例、APIドキュメント
  - 各チケットは担当・見積り・優先度を付与して管理してください。

見積り（ラフ、t-shirt/日数）:
  - 準備: 0.5日
  - コア実装: 2〜4日
  - テスト/ドキュメント: 1〜2日
  - 総計（目安）: 4〜7日

受け入れ基準:
  - 指定した基本評価ケースがすべて通る（`1 + 2 * 3`, 変数/定数、再代入規則）
  - `ruby_resolver` を使った未定義識別子解決が動作すること
  - 主要なエラーパスが期待する例外を返すこと
  - 最小のREADMEとテストが存在すること

依存関係:
  - 本チケットは `0001_要件定義作成.txt` に依存

担当者: （未割当）
期限: （要調整、推奨: チケット着手から1週間以内に最小実装）

---

作成日: 2025-12-25
作成者: (未設定)
