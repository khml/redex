チケット番号: 0008
タイトル: アーキテクチャ資料作成

概要:
  実装に先立ち、本プロジェクトのソフトウェアアーキテクチャを明確化する資料を作成する。
  資料は設計段階での意思決定と実装者への指針を目的とする。

目的:
  - 各コンポーネントの責務、データフロー、依存関係を明確にする
  - 拡張性・テスト戦略・エラーハンドリング方針を定義する
  - `ruby_resolver` と `context` の統合仕様を設計する

スコープ:
  含む:
    - 高レベルアーキテクチャ図（コンポーネント図）
    - モジュール分割（tokenizer, parser, ast, evaluator, resolver, errors, cli/repl, spec）
    - データフロー（ソース → トークン → AST → 評価）のシーケンス
    - API/モジュール境界と戻り値仕様（`result`, `env`, `errors`, `provenance`, `meta`）
    - エラーハンドリング方針（例外クラスと伝播ルール）
    - `context` の型制約・検証ルール（数値以外の扱い）
    - サンドボックス化 / セキュリティ考慮（将来チケットへの分離）
    - テスト戦略（単体・結合・プロパティテストの範囲）
  含まない:
    - 詳細な実装コード（実装フェーズで別チケットに分離）

成果物:
  - `docs/architecture.md`（ドキュメント本体）
  - アーキテクチャ図（SVG/PNG）を `docs/assets/` に格納
  - 主要な設計決定ログ（decision record）

受け入れ基準:
  - `docs/architecture.md` が作成され、主要コンポーネントとデータフローが明記されていること
  - `ruby_resolver` と `context` の解決順とエラー仕様が明確に記載されていること
  - 拡張ポイントとテスト戦略が記載されていること

見積り: 0.5〜1日
依存: 0001_1, 0002_setup_structure
担当: 未割当
作成日: 2025-12-25
